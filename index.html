<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TJ Workout Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
            min-height: 100vh;
            padding: 16px;
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: #1e293b;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        h1 {
            font-size: 28px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
        }

        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 16px;
        }

        @media (max-width: 640px) {
            .controls {
                grid-template-columns: 1fr;
            }
        }

        .control-group {
            display: flex;
            flex-direction: column;
        }

        label {
            font-size: 14px;
            color: #cbd5e1;
            margin-bottom: 8px;
            font-weight: 500;
        }

        select, input[type="date"] {
            background: #334155;
            color: white;
            border: 1px solid #475569;
            border-radius: 8px;
            padding: 12px;
            font-size: 16px;
            width: 100%;
        }

        select:focus, input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .button-group {
            display: flex;
            gap: 12px;
            grid-column: 1 / -1;
        }

        button {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.2s;
        }

        .btn-save {
            background: #16a34a;
            color: white;
        }

        .btn-save:hover {
            background: #15803d;
        }

        .btn-clear {
            background: #dc2626;
            color: white;
            flex: 0 0 auto;
            padding: 12px 20px;
        }

        .btn-clear:hover {
            background: #b91c1c;
        }

        .superset {
            background: #1e293b;
            border-radius: 12px;
            margin-bottom: 16px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .superset-header {
            background: #334155;
            padding: 16px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s;
        }

        .superset-header:hover {
            background: #3f4f63;
        }

        .superset-header h2 {
            font-size: 20px;
            color: #60a5fa;
        }

        .superset-content {
            padding: 24px;
            display: none;
        }

        .superset-content.expanded {
            display: block;
        }

        .exercise {
            background: #334155;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .exercise:last-child {
            margin-bottom: 0;
        }

        .exercise h3 {
            font-size: 18px;
            margin-bottom: 12px;
            color: white;
        }

        .exercise h3 span {
            color: #94a3b8;
            font-size: 14px;
            font-weight: normal;
        }

        .checkbox-item {
            background: #475569;
            border: 1px solid #64748b;
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .checkbox-item label {
            margin: 0;
            cursor: pointer;
            flex: 1;
            color: white;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead th {
            text-align: left;
            padding-bottom: 8px;
            color: #cbd5e1;
            font-size: 14px;
            font-weight: 500;
        }

        tbody tr {
            border-top: 1px solid #475569;
        }

        tbody td {
            padding: 12px 12px 12px 0;
        }

        tbody td:first-child {
            font-weight: 600;
            color: white;
        }

        input[type="number"],
        input[type="text"] {
            background: #475569;
            border: 1px solid #64748b;
            color: white;
            border-radius: 6px;
            padding: 8px;
            font-size: 14px;
        }

        input[type="number"] {
            width: 80px;
        }

        input[type="text"] {
            width: 100%;
        }

        .footer {
            background: #1e293b;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            color: #94a3b8;
            font-size: 14px;
            margin-top: 24px;
        }

        .chevron {
            transition: transform 0.2s;
        }

        .chevron.rotated {
            transform: rotate(90deg);
        }

        .icon {
            width: 20px;
            height: 20px;
        }

        .cardio-options {
            background: #475569;
            border-radius: 6px;
            padding: 16px;
        }

        .cardio-option {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .cardio-option:last-child {
            margin-bottom: 0;
        }

        .cardio-option input[type="radio"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .cardio-option label {
            margin: 0;
            cursor: pointer;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>
                <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                TJ Workout Tracker
            </h1>
            
            <div class="controls">
                <div class="control-group">
                    <label for="workout-day">Workout Day</label>
                    <select id="workout-day">
                        <option value="day1">Day 1 - Chest Focused</option>
                        <option value="day2">Day 2 - Upper Back + Arms</option>
                        <option value="day3">Day 3 - Posterior</option>
                        <option value="day4">Day 4 - Mobility & Cardio</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="workout-date">Date</label>
                    <input type="date" id="workout-date">
                </div>
                
                <div class="button-group">
                    <button class="btn-save" onclick="saveWorkout()">
                        <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path>
                        </svg>
                        Save
                    </button>
                    <button class="btn-clear" onclick="clearWorkout()">
                        <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <div id="workout-content"></div>

        <div class="footer">
            Data is saved locally in your browser. Click "Save" to persist your workout data.
        </div>
    </div>

    <script>
        const workoutPlan = {
            day1: {
                name: "Day 1 - Full Body (Chest Focused)",
                supersets: [
                    {
                        name: "Superset A",
                        exercises: [
                            { name: "Push-Ups", sets: 3, reps: "to/near failure" },
                            { name: "Single-Arm DB Row", sets: 3, reps: "8-12" }
                        ]
                    },
                    {
                        name: "Superset B",
                        exercises: [
                            { name: "Incline DB Press", sets: 3, reps: "10-12" },
                            { name: "Lat Pulldown", sets: 3, reps: "10-12" }
                        ]
                    },
                    {
                        name: "Superset C",
                        exercises: [
                            { name: "Barbell Overhead Squat", sets: 3, reps: "6-8" },
                            { name: "Barbell RDL", sets: 3, reps: "8-10" }
                        ]
                    },
                    {
                        name: "Superset D",
                        exercises: [
                            { name: "Lateral Raises", sets: 3, reps: "12-15" },
                            { name: "Face Pulls", sets: 3, reps: "12-15" }
                        ]
                    },
                    {
                        name: "Core",
                        exercises: [
                            { name: "Pallof Press", sets: 2, reps: "12 each side" },
                            { name: "Cable Chop", sets: 2, reps: "12 each side" },
                            { name: "High Plank", sets: 1, reps: "45-60 sec" }
                        ]
                    }
                ]
            },
            day2: {
                name: "Day 2 - Full Body (Upper Back + Arms)",
                supersets: [
                    {
                        name: "Superset A",
                        exercises: [
                            { name: "Single-Arm Landmine Press", sets: 3, reps: "8-12 each" },
                            { name: "Banded Pull-Ups", sets: 3, reps: "near failure" }
                        ]
                    },
                    {
                        name: "Superset B",
                        exercises: [
                            { name: "Rope Pushdowns", sets: 3, reps: "12-15" },
                            { name: "DB/EZ Curls", sets: 3, reps: "10-12" }
                        ]
                    },
                    {
                        name: "Superset C",
                        exercises: [
                            { name: "Seated DB Shoulder Press", sets: 3, reps: "8-10" },
                            { name: "Reverse Flyes", sets: 3, reps: "12-15" }
                        ]
                    },
                    {
                        name: "Superset D",
                        exercises: [
                            { name: "Leg Curl or Glute Ham Raise", sets: 3, reps: "12-15" },
                            { name: "Cable Glute Kickbacks", sets: 3, reps: "12-15 each" }
                        ]
                    },
                    {
                        name: "Core",
                        exercises: [
                            { name: "Copenhagen Plank", sets: 2, reps: "20-30 sec each" },
                            { name: "Reverse Crunch", sets: 2, reps: "12-15" },
                            { name: "Back Extension", sets: 2, reps: "12-15" }
                        ]
                    }
                ]
            },
            day3: {
                name: "Day 3 - Full Body (Posterior Emphasis)",
                supersets: [
                    {
                        name: "Superset A",
                        exercises: [
                            { name: "Front Rack Box Step-Ups", sets: 4, reps: "6-8 each" },
                            { name: "DB Chest-Supported Row", sets: 4, reps: "10-12" }
                        ]
                    },
                    {
                        name: "Superset B",
                        exercises: [
                            { name: "Kickstand RDL", sets: 3, reps: "8-10 each" },
                            { name: "Reverse Lunges", sets: 3, reps: "8-10 each" }
                        ]
                    },
                    {
                        name: "Superset C",
                        exercises: [
                            { name: "Low Cable Chest Press", sets: 3, reps: "10-12" },
                            { name: "Ring Row", sets: 3, reps: "10-12" }
                        ]
                    },
                    {
                        name: "Superset D",
                        exercises: [
                            { name: "Hammer Curls", sets: 3, reps: "10-12" },
                            { name: "Straight-Arm Pulldown", sets: 3, reps: "12-15" }
                        ]
                    },
                    {
                        name: "Core",
                        exercises: [
                            { name: "Dead Bug", sets: 2, reps: "12 each side" },
                            { name: "Side Plank", sets: 2, reps: "30-45 sec each" },
                            { name: "Hollow Body Hold", sets: 2, reps: "30-45 sec" }
                        ]
                    }
                ]
            },
            day4: {
                name: "Day 4 - Mobility & Cardio",
                type: "mobility",
                sections: [
                    {
                        name: "Section 1 - Thoracic Mobility",
                        exercises: [
                            { name: "Foam Roller Snow Angels", desc: "2×10 slow reps" },
                            { name: "Quadruped Thread + Lock", desc: "2×6 each side" }
                        ]
                    },
                    {
                        name: "Section 2 - Scapular Control & Shoulder Mobility",
                        exercises: [
                            { name: "Scapular CARs", desc: "2×5 each direction" },
                            { name: "Prone Swimmers", desc: "2×5 slow reps" }
                        ]
                    },
                    {
                        name: "Section 3 - Rotator Cuff Rehab",
                        exercises: [
                            { name: "External Rotation @ 0°", desc: "2×12 each arm" },
                            { name: "External Rotation @ 90°", desc: "2×10 each arm" },
                            { name: "Internal Rotation @ 0°", desc: "2×12 each arm" },
                            { name: "Scaption Raise", desc: "2×10" }
                        ]
                    },
                    {
                        name: "Section 4 - Hip + Lower Body Mobility",
                        exercises: [
                            { name: "Couch Stretch", desc: "45–60 sec each side" },
                            { name: "Standing Hip CARs", desc: "2×5 each direction" },
                            { name: "Elevated Pigeon Hinge", desc: "2×8 each side" }
                        ]
                    },
                    {
                        name: "Section 5 - Posterior Chain & Spinal Control",
                        exercises: [
                            { name: "Back Extension Hold", desc: "1–2 minutes" },
                            { name: "Jefferson Curl", desc: "2×8 slow reps" }
                        ]
                    },
                    {
                        name: "Section 6 - Structural Reset",
                        exercises: [
                            { name: "Dead Hang", desc: "30–60 seconds" },
                            { name: "Squats (Deep Squat Hold)", desc: "30–60 seconds" }
                        ]
                    },
                    {
                        name: "Section 7 - 30 Min Steady-State Cardio",
                        cardioOptions: [
                            "Stair Stepper — RPE 6–7 for 30 minutes",
                            "Treadmill Incline Walk — 6–12% @ 2.8–3.4 mph for 30 minutes",
                            "Stationary Bike — Moderate resistance, 80–95 RPM for 30 minutes"
                        ]
                    }
                ]
            }
        };

        let workoutHistory = {};
        let expandedSections = {};

        function init() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('workout-date').value = today;
            
            const saved = localStorage.getItem('workoutHistory');
            if (saved) {
                workoutHistory = JSON.parse(saved);
            }

            document.getElementById('workout-day').addEventListener('change', renderWorkout);
            document.getElementById('workout-date').addEventListener('change', renderWorkout);
            
            renderWorkout();
        }

        function getWorkoutKey() {
            const day = document.getElementById('workout-day').value;
            const date = document.getElementById('workout-date').value;
            return `${day}_${date}`;
        }

        function toggleSection(idx) {
            expandedSections[idx] = !expandedSections[idx];
            renderWorkout();
        }

        function updateSet(supersetIdx, exerciseIdx, setIdx, field, value) {
            const key = getWorkoutKey();
            
            if (!workoutHistory[key]) workoutHistory[key] = {};
            if (!workoutHistory[key][supersetIdx]) workoutHistory[key][supersetIdx] = {};
            if (!workoutHistory[key][supersetIdx][exerciseIdx]) workoutHistory[key][supersetIdx][exerciseIdx] = [];
            if (!workoutHistory[key][supersetIdx][exerciseIdx][setIdx]) workoutHistory[key][supersetIdx][exerciseIdx][setIdx] = {};
            
            workoutHistory[key][supersetIdx][exerciseIdx][setIdx][field] = value;
        }

        function getSetValue(supersetIdx, exerciseIdx, setIdx, field) {
            const key = getWorkoutKey();
            return workoutHistory[key]?.[supersetIdx]?.[exerciseIdx]?.[setIdx]?.[field] || '';
        }

        function toggleMobilityExercise(sectionIdx, exerciseIdx) {
            const key = getWorkoutKey();
            
            if (!workoutHistory[key]) workoutHistory[key] = {};
            if (!workoutHistory[key][sectionIdx]) workoutHistory[key][sectionIdx] = {};
            if (!workoutHistory[key][sectionIdx][exerciseIdx]) workoutHistory[key][sectionIdx][exerciseIdx] = {};
            
            workoutHistory[key][sectionIdx][exerciseIdx].completed = !workoutHistory[key][sectionIdx][exerciseIdx].completed;
            renderWorkout();
        }

        function getMobilityExerciseCompleted(sectionIdx, exerciseIdx) {
            const key = getWorkoutKey();
            return workoutHistory[key]?.[sectionIdx]?.[exerciseIdx]?.completed || false;
        }

        function selectCardioOption(sectionIdx, option) {
            const key = getWorkoutKey();
            
            if (!workoutHistory[key]) workoutHistory[key] = {};
            if (!workoutHistory[key][sectionIdx]) workoutHistory[key][sectionIdx] = {};
            
            workoutHistory[key][sectionIdx].cardioOption = option;
            renderWorkout();
        }

        function getSelectedCardioOption(sectionIdx) {
            const key = getWorkoutKey();
            return workoutHistory[key]?.[sectionIdx]?.cardioOption || '';
        }

        function renderWorkout() {
            const day = document.getElementById('workout-day').value;
            const workout = workoutPlan[day];
            const content = document.getElementById('workout-content');
            
            if (workout.type === 'mobility') {
                // Render mobility workout
                let html = '';
                workout.sections.forEach((section, sectionIdx) => {
                    const isExpanded = expandedSections[sectionIdx];
                    html += `
                        <div class="superset">
                            <div class="superset-header" onclick="toggleSection(${sectionIdx})">
                                <h2>${section.name}</h2>
                                <svg class="icon chevron ${isExpanded ? 'rotated' : ''}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <polyline points="9 18 15 12 9 6"></polyline>
                                </svg>
                            </div>
                            <div class="superset-content ${isExpanded ? 'expanded' : ''}">
                    `;
                    
                    if (section.cardioOptions) {
                        // Cardio section with radio buttons
                        html += `
                            <div class="cardio-options">
                                <p style="color: #cbd5e1; margin-bottom: 12px; font-weight: 500;">Choose ONE:</p>
                        `;
                        section.cardioOptions.forEach((option, optionIdx) => {
                            const isSelected = getSelectedCardioOption(sectionIdx) === option;
                            html += `
                                <div class="cardio-option">
                                    <input type="radio" 
                                        id="cardio-${sectionIdx}-${optionIdx}" 
                                        name="cardio-${sectionIdx}" 
                                        ${isSelected ? 'checked' : ''}
                                        onchange="selectCardioOption(${sectionIdx}, '${option.replace(/'/g, "\\'")}')">
                                    <label for="cardio-${sectionIdx}-${optionIdx}">${option}</label>
                                </div>
                            `;
                        });
                        html += `</div>`;
                    } else {
                        // Regular mobility exercises with checkboxes
                        section.exercises.forEach((exercise, exerciseIdx) => {
                            const isCompleted = getMobilityExerciseCompleted(sectionIdx, exerciseIdx);
                            html += `
                                <div class="checkbox-item">
                                    <input type="checkbox" 
                                        id="mob-${sectionIdx}-${exerciseIdx}" 
                                        ${isCompleted ? 'checked' : ''}
                                        onchange="toggleMobilityExercise(${sectionIdx}, ${exerciseIdx})">
                                    <label for="mob-${sectionIdx}-${exerciseIdx}">
                                        <strong>${exercise.name}</strong> — ${exercise.desc}
                                    </label>
                                </div>
                            `;
                        });
                    }
                    
                    html += `
                            </div>
                        </div>
                    `;
                });
                content.innerHTML = html;
            } else {
                // Render lifting workout (existing code)
                let html = '';
                workout.supersets.forEach((superset, supersetIdx) => {
                    const isExpanded = expandedSections[supersetIdx];
                    html += `
                        <div class="superset">
                            <div class="superset-header" onclick="toggleSection(${supersetIdx})">
                                <h2>${superset.name}</h2>
                                <svg class="icon chevron ${isExpanded ? 'rotated' : ''}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <polyline points="9 18 15 12 9 6"></polyline>
                                </svg>
                            </div>
                            <div class="superset-content ${isExpanded ? 'expanded' : ''}">
                    `;
                    
                    superset.exercises.forEach((exercise, exerciseIdx) => {
                        html += `
                            <div class="exercise">
                                <h3>${exercise.name} <span>(${exercise.sets} sets × ${exercise.reps})</span></h3>
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Set</th>
                                            <th>Weight (lbs)</th>
                                            <th>Reps</th>
                                            <th>Notes</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                        `;
                        
                        for (let setIdx = 0; setIdx < exercise.sets; setIdx++) {
                            const weight = getSetValue(supersetIdx, exerciseIdx, setIdx, 'weight');
                            const reps = getSetValue(supersetIdx, exerciseIdx, setIdx, 'reps');
                            const notes = getSetValue(supersetIdx, exerciseIdx, setIdx, 'notes');
                            
                            html += `
                                <tr>
                                    <td>${setIdx + 1}</td>
                                    <td>
                                        <input type="number" step="0.5" placeholder="0" value="${weight}"
                                            onchange="updateSet(${supersetIdx}, ${exerciseIdx}, ${setIdx}, 'weight', this.value)">
                                    </td>
                                    <td>
                                        <input type="number" placeholder="0" value="${reps}"
                                            onchange="updateSet(${supersetIdx}, ${exerciseIdx}, ${setIdx}, 'reps', this.value)">
                                    </td>
                                    <td>
                                        <input type="text" placeholder="Optional notes" value="${notes}"
                                            onchange="updateSet(${supersetIdx}, ${exerciseIdx}, ${setIdx}, 'notes', this.value)">
                                    </td>
                                </tr>
                            `;
                        }
                        
                        html += `
                                    </tbody>
                                </table>
                            </div>
                        `;
                    });
                    
                    html += `
                            </div>
                        </div>
                    `;
                });
                content.innerHTML = html;
            }
        }

        function saveWorkout() {
            localStorage.setItem('workoutHistory', JSON.stringify(workoutHistory));
            alert('Workout saved successfully!');
        }

        function clearWorkout() {
            if (confirm('Clear all data for this workout session?')) {
                const key = getWorkoutKey();
                delete workoutHistory[key];
                localStorage.setItem('workoutHistory', JSON.stringify(workoutHistory));
                renderWorkout();
            }
        }

        init();
    </script>
</body>
</html>